(this.webpackJsonptestdome=this.webpackJsonptestdome||[]).push([[0],{49:function(e,t,a){},50:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(19),r=a.n(s),c=(a(49),a(50),a(21)),o=a(6),i=a(29),l=a(12),u=a(4),p=a.n(u),d=a(9),j=a(14),b=a.n(j),h={getTasks:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("https://organizateunpoco.herokuapp.com/api/tasks");case 3:n=e.sent,t({type:"GET_TASKS",payload:n.data.response}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},postTask:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("https://organizateunpoco.herokuapp.com/api/tasks",e);case 3:s=t.sent,a({type:"POST_TASK",payload:s.data.response}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()},deleteTask:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.delete("https://organizateunpoco.herokuapp.com/api/task/"+e);case 3:a({type:"DELETE_TASK",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}()},taskStatus:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("https://organizateunpoco.herokuapp.com/api/task/"+e);case 3:s=t.sent,a({type:"TASK_STATUS",payload:s.data.response}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}},g=a(40),O=a(41),f=a(2),m={taskStatus:h.taskStatus},x=Object(l.b)(null,m)((function(e){var t=e.task,a=e.deleteTask,n=e.idx,s=e.taskStatus;return Object(f.jsxs)("div",{className:t.done?"taskContainer opacity":"taskContainer",children:[Object(f.jsxs)("div",{className:"taskInfo",children:[Object(f.jsx)("h2",{children:t.title}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"bold",children:"Fecha:"})," ",t.date.split("-").reverse().join("/")]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"bold",children:"Hora:"})," ",t.time]}),Object(f.jsx)("p",{children:t.description})]}),Object(f.jsxs)("div",{className:"controls",children:[Object(f.jsx)("button",{className:"btnControl",onClick:function(){s(t._id)},children:Object(f.jsx)(g.a,{className:"icons"})}),Object(f.jsx)("button",{className:"btnControl",onClick:function(){return a(t._id,n)},children:Object(f.jsx)(O.a,{className:"icons"})})]})]})})),v={getTasks:h.getTasks,postTask:h.postTask,deleteTask:h.deleteTask,updateTask:h.updateTask},k=Object(l.b)((function(e){return{allTasks:e.tasks.allTasks,loggedUser:e.users.loggedUser}}),v)((function(e){var t=e.getTasks,a=e.allTasks,s=e.postTask,r=e.deleteTask,l=e.updateTask,u=e.loggedUser,p=Object(n.useState)([]),d=Object(i.a)(p,2),j=d[0],b=d[1],h=Object(n.useState)({title:"",time:"",date:"",description:""}),g=Object(i.a)(h,2),O=g[0],m=g[1];Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){if(0!==a.length){var e=a.sort((function(e,t){return e.date.split("-").join("")-t.date.split("-").join("")}));b(e)}}),[a]);var v=function(e){m(Object(o.a)(Object(o.a)({},O),{},Object(c.a)({},e.target.name,e.target.value)))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{style:{marginTop:"1vh",textAlign:"center",marginBottom:"6vh"},children:"Agenda 2021"}),Object(f.jsxs)("div",{className:"bigContainer",children:[Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"inputs",children:[Object(f.jsx)("input",{type:"text",name:"title",placeholder:"T\xedtulo",className:"input",onChange:v,value:O.title}),Object(f.jsx)("input",{type:"time",name:"time",placeholder:"Hora",className:"input",onChange:v,value:O.time}),Object(f.jsx)("input",{type:"date",name:"date",placeholder:"fecha",className:"input",onChange:v,value:O.date}),Object(f.jsx)("textarea",{name:"description",placeholder:"Descripci\xf3n de la tarea",className:"input",onChange:v,value:O.description}),Object(f.jsx)("button",{onClick:function(){""===O.title||""===O.time||""===O.date||""===O.description?alert("No blank inputs"):(s({task:O,userId:u._id}),m({title:"",time:"",date:"",description:""}))},className:"sendBtn",children:"Enviar"})]})}),Object(f.jsxs)("div",{className:"tasksContainer",children:[0===a.length&&Object(f.jsxs)("div",{className:"noTasks",children:[Object(f.jsx)("h1",{children:"A\xfan no tienes tareas"}),Object(f.jsx)("h2",{children:"Agrega una nueva"})]}),0!==a.length&&j.map((function(e,t){if(u.email===e.userId.email)return Object(f.jsx)(x,{task:e,deleteTask:r,updateTask:l,idx:t},e._id)}))]})]})]})})),T=a(42),y=a(5),N=a(26),S=a.n(N),U={signIn:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("https://organizateunpoco.herokuapp.com/api/user/signin",e);case 2:if((s=t.sent).data.success){t.next=5;break}return t.abrupt("return",s.data);case 5:a({type:"USER_LOG",payload:s.data.response});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},signUp:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("https://organizateunpoco.herokuapp.com/api/user/signup",e);case 2:if(!(s=t.sent).data.success){t.next=6;break}return a({type:"USER_LOG",payload:s.data.response}),t.abrupt("return",s.data);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},signOut:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SIGN_OUT"});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},preserve:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("https://organizateunpoco.herokuapp.com/api/user/preserve",{token:e},{headers:{Authorization:"Bearer "+e}});case 2:s=t.sent,a({type:"USER_LOG",payload:s.data.response});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},w={signUp:U.signUp,signIn:U.signIn},_=Object(l.b)(null,w)((function(e){var t=e.signUp,a=e.signIn,n=e.history,s=function(){var e=Object(d.a)(p.a.mark((function e(a){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({firstName:a.profileObj.givenName,lastName:a.profileObj.familyName,email:a.profileObj.email,password:a.profileObj.googleId,picUrl:a.profileObj.imageUrl});case 2:(s=e.sent)&&s.success&&n.push("/agenda");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(d.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({email:t.profileObj.email,password:t.profileObj.googleId});case 2:(s=e.sent)&&!s.success?alert(s.response):n.push("/agenda");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:" register",children:[Object(f.jsxs)("div",{className:"left",children:[Object(f.jsxs)("div",{className:"googleContainer",children:[Object(f.jsx)("h3",{children:"Ya ten\xe9s cuenta? Inici\xe1 sesi\xf3n"}),Object(f.jsx)(S.a,{clientId:"860837672559-v8rvkoo3q9bs4ln02uvpr3pileo394ta.apps.googleusercontent.com",buttonText:"Inicia sesi\xf3n con google",onSuccess:r,onFailure:r,cookiePolicy:"single_host_origin"})]}),Object(f.jsxs)("div",{className:"googleContainer",children:[Object(f.jsx)("h3",{children:"No ten\xe9s cuenta? Registrate"}),Object(f.jsx)(S.a,{clientId:"860837672559-v8rvkoo3q9bs4ln02uvpr3pileo394ta.apps.googleusercontent.com",buttonText:"Registrate con google",onSuccess:s,onFailure:s,cookiePolicy:"single_host_origin"})]})]}),Object(f.jsx)("div",{className:"right",children:Object(f.jsxs)("div",{className:"text",children:[Object(f.jsx)("h2",{children:"Hay mucho para hacer"}),Object(f.jsx)("h2",{children:"Organizate"})]})})]})})),I={signOut:U.signOut},C=Object(l.b)((function(e){return{loggedUser:e.users.loggedUser}}),I)((function(e){var t=e.loggedUser,a=e.signOut;return Object(f.jsx)(f.Fragment,{children:t&&Object(f.jsxs)("header",{style:{display:"flex"},children:[Object(f.jsxs)("div",{className:"user",children:[Object(f.jsx)("div",{className:"userImg",style:{backgroundImage:"url(".concat(t.picUrl,")"),backgroundSize:"cover",borderRadius:"100%"}}),Object(f.jsxs)("p",{children:["Hola ",t.firstName,"!"]})]}),Object(f.jsx)("p",{onClick:function(){return a()},className:"link",children:"Cerrar sesi\xf3n"})]})})}));var E={preserve:U.preserve},A=Object(l.b)((function(e){return{loggedUser:e.users.loggedUser}}),E)((function(e){var t=e.loggedUser,a=e.preserve;return Object(n.useEffect)((function(){!t&&localStorage.getItem("token")&&a(localStorage.getItem("token"))}),[]),Object(f.jsxs)(T.a,{children:[Object(f.jsx)(C,{}),Object(f.jsx)(y.d,{children:t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(y.a,{to:"agenda"}),Object(f.jsx)(y.b,{path:"/agenda",component:k})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(y.b,{exact:!0,path:"/",component:_}),Object(f.jsx)(y.a,{to:"/"})]})})]})})),z=a(15),G=a(44),K={allTasks:[]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TASKS":return Object(o.a)(Object(o.a)({},e),{},{allTasks:t.payload});case"POST_TASK":return Object(o.a)(Object(o.a)({},e),{},{allTasks:[].concat(Object(G.a)(e.allTasks),[t.payload])});case"DELETE_TASK":return Object(o.a)(Object(o.a)({},e),{},{allTasks:e.allTasks.filter((function(e){return t.payload!==e._id}))});case"TASK_STATUS":return Object(o.a)(Object(o.a)({},e),{},{allTasks:e.allTasks.map((function(e){return e._id===t.payload._id?t.payload:e}))});default:return e}},R={loggedUser:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOG":return localStorage.setItem("firstName",t.payload.firstName),localStorage.setItem("picUrl",t.payload.picUrl),localStorage.setItem("token",t.payload.token),Object(o.a)(Object(o.a)({},e),{},{loggedUser:t.payload});case"SIGN_OUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{loggedUser:null});default:return e}},B=Object(z.c)({tasks:F,users:L}),H=a(43),P=Object(z.d)(B,Object(z.a)(H.a));r.a.render(Object(f.jsx)(l.a,{store:P,children:Object(f.jsx)(A,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.8e38278a.chunk.js.map